"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function sortBy() {
    var properties = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        properties[_i] = arguments[_i];
    }
    return function (obj1, obj2) {
        var props = properties.filter(function (prop) { return typeof prop === 'string'; });
        var map = properties.filter(function (prop) { return typeof prop === 'function'; })[0];
        var i = 0;
        var result = 0;
        var numberOfProperties = props.length;
        while (result === 0 && i < numberOfProperties) {
            result = sort(props[i], map)(obj1, obj2);
            i++;
        }
        return result;
    };
}
exports.sortBy = sortBy;
function sort(property, map) {
    var sortOrder = 1;
    if (property[0] === '-') {
        sortOrder = -1;
        property = property.substr(1);
    }
    if (property[property.length - 1] === '^') {
        property = property.substr(0, property.length - 1);
        map = function (_key, value) {
            return typeof value === 'string' ? value.toLowerCase() : value;
        };
    }
    var apply = map ||
        function (_key, value) {
            return value;
        };
    return function (a, b) {
        var result = 0;
        var mappedA = apply(property, objectPath(a, property));
        var mappedB = apply(property, objectPath(b, property));
        if (mappedA < mappedB) {
            result = -1;
        }
        else if (mappedA > mappedB) {
            result = 1;
        }
        return result * sortOrder;
    };
}
function objectPath(object, path) {
    var pathParts = path.split('.');
    var result = object;
    pathParts.forEach(function (part) {
        result = result[part];
    });
    return result;
}
